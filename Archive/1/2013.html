
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8" />
	<title>Productive Rage - January 2013</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#393939" />
	<link rel="stylesheet" type="text/css" media="all" href="/Content/Styles.css" />
	<!--[if lt IE 9]>
	<link rel="stylesheet" type="text/css" href="/Content/IEBefore9.css" />
	<![endif]-->
	<link rel="stylesheet" type="text/css" media="print" href="/Content/PrintOverrides.css" />
	<meta name="robots" content="noindex, follow" />
	<link rel="shortcut icon" href="/favicon.ico" />
	<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
	<link rel="alternate" type="application/rss+xml" title="RSS" href="http://www.productiverage.com/feed" />
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', "UA-32312857-1"]);
		_gaq.push(['_setSiteSpeedSampleRate', 100]);
		_gaq.push(['_trackPageview']);
		(function () {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>
</head>

<body>

	<div class="Header">
		<div class="HeaderContent">
			<h1>
				<a href="/">Productive Rage</a>
			</h1>
			<span class="Tagline">Dan's techie ramblings</span>
		</div>
	</div>

	<div class="WrapperOuter">
		<div class="Wrapper">

			<div class="Main HasSideBar">
				


		<script type="text/javascript">
					var disqus_shortname = "productiverage";
					function executeWhen(fncAction, fncConditional, intDelayBetweenRetries) {
						if (fncConditional()) { fncAction(); return; }
						setTimeout(function () { executeWhen(fncAction, fncConditional, intDelayBetweenRetries); }, intDelayBetweenRetries);
					}
					function whenjQueryIsAvailable(fncAction) {
					    executeWhen(
							fncAction,
							function () { return (typeof ($) !== "undefined") },
							10
						);
					}
					(function () {
					    whenjQueryIsAvailable(
							function () { $("div.Content p.Comments").show(); }
						);
					}());
		</script>

	<div class="Content ArchiveByMonth">
		<h3 class="PostDate">19 January 2013</h3><h2><a id="Post43"></a><a href="/never-typing-an-argument-null-exception-again">Never typing an Argument Null Exception again!</a></h2>

<p>Ever since my first post (<a href="/i-love-immutable-data">I love Immutable Data</a>) I've recognised the overhead of the additional (and repetitive!) typing of the validation that goes with it. But for some reason, I've never actively sought out a way to try to ease this burden. I've seen some people use ReSharper templates but not extensively (and I've not given ReSharper a go yet - despite many recommendations - so until I make the time to, I can't comment on how useful it may or may not be for this).</p>

<p>And then I came across a reference to something called "Code Snippets" in Visual Studio - a way to quickly insert common structures. Something that has apparently been available since VS 2005! I'm a little ashamed that this was the first time I encountered them! (I consoled myself with the fact that, from talking to some other devs, this doesn't seem to be one of the most well-known VS features.. but still).</p>

<p>eg. instead of repeatedly typing something like</p>

<pre><code>if (role == null)
  throw new ArgumentNullException("role");
</code></pre>

<p>I can configure it to allow me to type "tna" and have it translated into</p>

<pre><code>if (value == null)
  throw new ArgumentNullException("value");
</code></pre>

<p>but with the first instance of "value" highlighted such that I can insert the actual parameter name (starting to type this will also use intellisense to try to match what I'm typing to something in the current scope). After I hit Enter, it will automatically populate the second instance of "value". Amazing; instant time saver!</p>

<p>The easiest way to get this up and running is to copy the following content into a file somewhere called "ThrowArgumentNullException.snippet" (the filename doesn't matter other than the ".snippet" extension):</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;CodeSnippets  xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet"&gt;
      &lt;CodeSnippet Format="1.0.0"&gt;
    &lt;Header&gt;
      &lt;Title&gt;Throw ArgumentNullException&lt;/Title&gt;
      &lt;Description&gt;Throw ArgumentNullException&lt;/Description&gt;
      &lt;Shortcut&gt;tna&lt;/Shortcut&gt;
      &lt;SnippetTypes&gt;
        &lt;SnippetType&gt;Expansion&lt;/SnippetType&gt;
        &lt;SnippetType&gt;SurroundsWith&lt;/SnippetType&gt;
      &lt;/SnippetTypes&gt;
    &lt;/Header&gt;
    &lt;Snippet&gt;
      &lt;Declarations&gt;
        &lt;Literal&gt;
          &lt;ID&gt;arg&lt;/ID&gt;
          &lt;Default&gt;value&lt;/Default&gt;
        &lt;/Literal&gt;
      &lt;/Declarations&gt;
      &lt;Code Language="csharp"&gt;&lt;![CDATA[if ($arg$ == null)
throw new ArgumentNullException("$arg$");
    $end$]]&gt;
      &lt;/Code&gt;
    &lt;/Snippet&gt;
  &lt;/CodeSnippet&gt;
&lt;/CodeSnippets&gt;
</code></pre>

<p>Then import it into Visual Studio by going to Tools / Code Snippets Manager, selecting "Visual C#" as the language and clicking Import. Once you import the file, it will ask you where you want to import it into. There should be a "My Code Snippets" location which will do fine.</p>

<p>When the Code Snippets Manager is closed, the snippet should become immediately available in the editor (no restarting VS, or anything crazy like that).</p>

<p>So within a function with arguments, type "tna" (this string is specified by the "Shortcut" node in the snippet xml) and hit Tab twice (once for intellisense to match the "tna" string to the snippet and the second time to actually insert the snippet content). Then type in the parameter name and press Enter twice (again, it seems to be once to match what you've entered using intellisense - or not, if it doesn't match anything in scope - and the second time to end the snippet insertion and move on). It seems a bit weird to have to hit Tab and Enter twice each, but I can live with it!</p>

<p>Another similar, but also common, snippet I use is to check a string argument against string.IsNullorWhiteSpace:</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;CodeSnippets  xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet"&gt;
  &lt;CodeSnippet Format="1.0.0"&gt;
    &lt;Header&gt;
      &lt;Title&gt;If IsNullOrWhiteSpace Throw ArgumentException&lt;/Title&gt;
      &lt;Description&gt;
        Throw ArgumentException if arg reports string.IsNullOrWhiteSpace
      &lt;/Description&gt;
      &lt;Shortcut&gt;tnw&lt;/Shortcut&gt;
      &lt;SnippetTypes&gt;
        &lt;SnippetType&gt;Expansion&lt;/SnippetType&gt;
        &lt;SnippetType&gt;SurroundsWith&lt;/SnippetType&gt;
      &lt;/SnippetTypes&gt;
    &lt;/Header&gt;
    &lt;Snippet&gt;
      &lt;Declarations&gt;
        &lt;Literal&gt;
          &lt;ID&gt;arg&lt;/ID&gt;
          &lt;Default&gt;value&lt;/Default&gt;
        &lt;/Literal&gt;
      &lt;/Declarations&gt;
      &lt;Code Language="csharp"&gt;&lt;![CDATA[if (string.IsNullOrWhiteSpace($arg$))
throw new ArgumentNullException("Null/blank $arg$ specified");
    $end$]]&gt;
      &lt;/Code&gt;
    &lt;/Snippet&gt;
  &lt;/CodeSnippet&gt;
&lt;/CodeSnippets&gt;
</code></pre>

<p>This is really only scratching the surface of what's possible and I suspect I'll end up adding more to my arsenal over time. More information can be found at <a href="http://msdn.microsoft.com/en-us/library/ms165392(v=vs.80).aspx">Creating and Using IntelliSense Code Snippets</a> on the MSDN site.</p>

<p>While looking into this, I found that Visual Studio has a few useful snippets available out of the box. For example "propg" will expand to</p>

<pre><code>public int MyProperty { get; private set; }
</code></pre>

<p>where "int" and "MyProperty" are insertion values; these are the defaults but after "propg" is expanded, "int" is highlighted which may be replaced with new content and then "MyProperty" moved to by hitting Tab. Handy!</p><p class="PostTime">Posted at 13:15</p>
			<p class="Comments">
				<a href="/never-typing-an-argument-null-exception-again#disqus_thread" data-disqus-identifier="43">Comments</a>
			</p>
	</div>
	<div class="Content ArchiveByMonth">
		<h3 class="PostDate">8 January 2013</h3><h2><a id="Post42"></a><a href="/noncascading-css-a-revolution">Non-cascading CSS: A revolution!</a></h2>

<h4>("Barely-cascading CSS: A revolution!", "Barely-cascading CSS: A revolution??")</h4>

<p>This post was inspired by what I read at <a href="http://www.lispcast.com/cascading-separation-abstraction">www.lispcast.com/cascading-separation-abstraction</a> who in turn took some inspiration from <a href="http://37signals.com/svn/posts/3003-css-taking-control-of-the-cascade">37signals.com/svn/posts/3003-css-taking-control-of-the-cascade</a>.</p>

<p>Part of what really clicked for me was this</p>

<blockquote>
  <p>The value of a CSS property is determined by these factors:</p>
  
  <ul>
  <li>The order of CSS imports</li>
  <li>The number of classes mentioned in the CSS rule</li>
  <li>The order of rules in a particular file</li>
  <li>Any inherits settings</li>
  <li>The tag name of the element</li>
  <li>The class of the element</li>
  <li>The id of the element</li>
  <li>All of the element's ancestors in the HTML tree</li>
  <li>The default styles for the browser</li>
  </ul>
</blockquote>

<p>combined with</p>

<blockquote>
  <p>By using nested LESS rules and child selectors, we can avoid much of the pain of cascading rules. Combining with everything else, we define our styles as mixins (and mixins of mixins)..</p>
</blockquote>

<p>and then the guidelines</p>

<blockquote>
  <ol>
  <li>Only bare (classless + non-nested) selectors may occur in the reset.</li>
  <li>No bare selectors may occur in the LESS rules.</li>
  <li>No selector may be repeated in the LESS rules.</li>
  </ol>
</blockquote>

<p>along with</p>

<blockquote>
  <p>The box model sucks.. And what happens when I set the width to 100%? What if a padding is cascaded in? Oops.</p>
  
  <p>I propose to boycott the following properties: ..</p>
</blockquote>

<p>I must admit that when I first read the whole article I thought it was quite interesting but it didn't fully grab me immediately. But it lingered in the back of my mind for a day or two and the more I thought about it, the more it took hold and I started to think this could offer a potentially huge step forward for styling. Now, I wish <em>I'd</em> put it all together!</p>

<p>What I really think it could possibly offer as the holy grail is the ability to re-use entire chunks of styling across sites. At work this is something that has been posited many times in the past but it's never seemed realistic because the styles are so intermingled between layout specific to one site and the various elements of a control. So even in cases where the basic control and its elements are similar between sites, it's seemed almost implausible to consistently swap style chunks back and forth and to expect them to render correctly, no matter how careful and thoughtful you are with constructing the styles. But I realise now that this is really due almost entirely to the complex cascading rules and its many knock-on effects!</p>

<p>So I'm going to present my interpretation of the guidelines. Now, these aren't fully road-tested yet, I intend to put them to use in a non-trivial project as soon as I get the chance so this is just my initial plan-of-attack..</p>

<h3>My interpretation</h3>

<p>I'm going to stick with <a href="http://lesscss.org">LESS</a> as the CSS processor since I've used it in the past.</p>

<ol>
<li><p>A standard (html5-element-supporting) reset sheet is compulsory, only bare selectors may be specified in it</p></li>
<li><p>A single "common" or "theme" sheet will be included with a <em>minimum</em> of default styles, only bare selectors may be specified in it</p></li>
<li><p>No bare selectors may occur in the non-reset-or-theme rules (a bare selector may occur <em>within</em> a nested selector so long as child selectors are strictly used)</p></li>
<li><p>Stylesheets are broken out into separate files, each with a well-defined purpose</p></li>
<li><p>All files other than the reset and theme sheets should be wrapped in a body "scope"</p></li>
<li><p>No selector may be repeated in the rules</p></li>
<li><p>All measurements are described in pixels</p></li>
<li><p>Margins, where specified, must always be fully-defined</p></li>
<li><p>Border and Padding may not be combined with Width</p></li>
</ol>

<p><img src="/Content/Images/Posts/MassivelyCascadingStyles.png" alt="Massively Cascading Styles" title="Massively Cascading Styles" /></p>

<p><em>(Above) This is what I'm trying to avoid!</em></p>

<h4>A standard (html5-element-supporting) reset sheet is compulsory</h4>

<p>This is really to take any browser variation out of the equation. You can start by thinking it's something along the lines of "* { margin: 0; padding: 0; }" and then think some more about it and then just go for Eric Meyer's html5-supporting reset. That's my plan at least! :)</p>

<h4>A single "common" or "theme" sheet will be included with a <em>minimum</em> of default styles, only bare selectors may be specified in it</h4>

<p>I was almost in two minds about this because it feels like it <em>is</em> inserting a layer of cascading back in, but I think there should be one place to declare the background colour and margin for the body, to set the default font colour, to set "font-weight: bold" on strong tags and to set shared variables and mixins.</p>

<h4>No bare selectors may occur in the non-reset-or-theme rules (a bare selector may occur <em>within</em> a nested selector so long as child selectors are strictly used)</h4>

<p>Bare selectors (eg. "div" rather than "div.AboutMe", or even "div.AboutMe div") are too generic and will almostly certainly end up polluting another element's style cascade, which we're trying to avoid.</p>

<p>The reason for the exception around child selectors is that this may be used in places where classes don't exist on all of the elements to be targeted. Or if the bullet point type for a particular list is to be altered, we wouldn't expect to have to rely upon classes - eg.</p>

<pre><code>&lt;div class="ListContainer"&gt;
  &lt;ul&gt;
    &lt;li&gt;Item&lt;/li&gt;
    &lt;li&gt;Another Item&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
</code></pre>

<p>may be styled with</p>

<pre><code>div.ListContainer
{
  &gt; ul &gt; li { list-style-type: square; }
}
</code></pre>

<p>This would <em>not</em> affect the second level of items. So if the markup was</p>

<pre><code>&lt;div class="ListContainer"&gt;
  &lt;ul&gt;
    &lt;li&gt;
      Item
      &lt;ul&gt;
        &lt;li&gt;Sub Item&lt;li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;Another Item&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
</code></pre>

<p>then "Sub Item" will not get the "square" bullet point from the above styles. And this is progress! This is what we want, for styles to have to be explicit and not possibly get picked up from layer after layer of possible style matches. If we didn't use child selectors and we didn't want the nested list to have square markers then we'd have to add another style to undo the square setting.</p>

<p>Or, more to point (no pun intended!), if we want to specify a point style for the nested list then adding this style will not be overriding the point style from the outer list, it will be specifying it for the first time (on top of the reset style only), thus limiting the number of places where the style may have come from.</p>

<p>In order for the inner list to have circle markers we need to extend the style block to</p>

<pre><code>div.ListContainer
{
  &gt; ul &gt; li
  {
    list-style-type: square;
    &gt; ul &gt; li
    {
      list-style-type: circle
    }
  }
}
</code></pre>

<h4>Stylesheets are broken out into separate files, each with a well-defined purpose</h4>

<p>This is for organisational purposes and I imagine that it's a fairly common practice to an extent, but I think it's worth taking a step further in terms of granularity and having each "chunk" or control in its own file. Since pre-processing is going to be applied to combine all of the files together, why not have loads of them if it makes styles easier to organise and find!</p>

<p><img src="/Content/Images/Posts/AmazonBreakdownExample.png" alt="Amazon Home Page" title="Amazon Home Page" />
I've just had a quick look at Amazon to pick out examples. I would go so far as to have one file <em>NavTopBar.less</em> for the navigation strip across the top, distinct from the <em>NavShopByDepartment.less</em> file. Then a LayoutHomePage file would arrange these elements, with all of the other on that page.</p>

<p>The more segregated styles are, the more chance (I hope!) that these file-size chunks could be shared between projects.</p>

<p>One trick I've been toying with at work is to inject "source ids" into the generated css in the pre-processing step so that when the style content is all combined, LESS-compiled and minified, it's possible to determine where the style originally came from.</p>

<p>For example, I might end up with style in the final output like</p>

<pre><code>#AboutMe.css_6,div.ListContainer&gt;ul&gt;li{list-style-type:square}
</code></pre>

<p>where the "#AboutMe.css_6" id relates not to an element but line 6 of the "AboutMe.css" file. It's a sort of poor man's version of Source Mapping which I don't believe is currently available for CSS (which is a pity.. there's a Mozilla feature request for it, though: <a href="https://wiki.mozilla.org/DevTools/Features/CSSSourceMap">CSSSourceMap</a>).</p>

<p>I haven't decided yet whether this should be some sort of debug option or whether the overhead of the additional bytes in the final payload are worth the benefit for debugging. There's an argument that if the styles are broken into files and all have tightly targeted selectors then it should be relatively easy to find the source file and line, but sometimes this doesn't feel like the case when you go back to a project six months after you last looked at it!</p>

<p>Another example of a file with a "well-defined purpose" might be to apply a particular grid layout to a particular template, say "CheckoutPageLayout". This would arrange the various elements, but each <em>of</em> the elements within the page would have their own files.</p>

<h4>All files other than the reset and theme sheets should be wrapped in a body scope</h4>

<p>This is inspired by the Immediately Invoked Function Expression pattern used in Javascript to forcibly contain the scope of variables and functions within. Since we can do the same thing with LESS values and mixins, I thought it made sense to keep them segregated, this way if the same name is used for values or mixins in different files, they won't trample on each other toes.</p>

<p>The idea is simply to nest all statements within a file inside a "body { .. }" declaration - ie.</p>

<pre><code>body
{

  // All the content of the file goes here..

}
</code></pre>

<p>This will mean that the resulting styles will all be preceded with the "body" tag which adds some bloat to the final content, but I think it's worth it to enable this clean scoping of values and mixins. Any values and mixins that <em>should</em> be shared across files should be defined in the "common" / "theme" sheet.</p>

<p>Just as a quick reminder, the following LESS</p>

<pre><code>@c = red;
.e1 { color: @c; }
body
{
  @c = blue;
  .e2 { color: @c; }
}
.e3 { color: @c; }
</code></pre>

<p>will generate this CSS</p>

<pre><code>.e1 { color: red; }
body .e2 { color: blue; }
.e3 { color: red; }
</code></pre>

<p>The @c value inside the body scope applies within that scope and overrides the @c value outside of the scope while inside the scope. Once back out of the scope (after the "body { .. }" content), @c still has the value "red".</p>

<p>It's up for debate whether this definitely turns out to be a good idea. Interesting, so far I've not come across it anywhere else, but it really seems like it would increase the potential for sharing files (that are tightly scoped to particular controls, or other unit of layout / presentation) between projects.</p>

<p><strong>Update (4th June 2013)</strong>: I've since updated this rule to specify the use of the html tag rather than body as I've written a processor that will strip out the additional tags injected (see <a href="/extending-the-css-minifier">Extending the CSS Minifier</a>) and stripping out body tags would mean that selectors could not be written that target elements in a page where a particular class is specified on the body tag.</p>

<h4>No selector may be repeated in the rules</h4>

<p>In order to try to ensure that no element gets styles specified in more places than it should (that means it should be set no more frequently than in the resets, in the "common" / "theme" sheet and then at most by one other specific selector), class names should not be repeated in the rules.</p>

<p>With segregation of styles in various files, it should be obvious which single file any given style belongs in. To avoid duplicating a class name, LESS nesting should be taken advantage of, so the earlier example of</p>

<pre><code>div.ListContainer
{
  border: 1px solid black;

  &gt; ul &gt; li { list-style-type: square; }
}
</code></pre>

<p>is used instead of</p>

<pre><code>div.ListContainer { border: 1px solid black; }

div.ListContainer &gt; ul &gt; li { list-style-type: square; }
</code></pre>

<p>and where previously class names might have been repeated in a CSS stylehset because similar properties were being set for multiple elements, this should now be done with mixins - eg. instead of</p>

<pre><code>div.Outer, div.Inner
{
  float: left;
  width: 100%;
}

div.Inner { border: 1px solid black; }
</code></pre>

<p>we can use</p>

<pre><code>.FullWidthFloat ()
{
  float: left;
  width: 100%;
}

div.Outer
{
  .FullWidthFloat;
}

div.Inner
{
  .FullWidthFloat;
  border: 1px solid black;
}
</code></pre>

<p>This is clearly straight from lispcast's post, it's a direct copy-and-paste of their guideline 2!</p>

<p>We have to accept that this still can't prevent a given element from having styles set in multiple places, because it's feasible that multiple selectors could point to the same element (if an element has multiple classes then there could easily be multiple selectors that all target it) but this is definitely a good way to move towards the minimum number of rules affecting any one thing.</p>

<h4>All measurements are described in pixels</h4>

<p>I've been all round the houses in the last few years with measurement units. Back before browsers all handled content-resizing with zoom functionality (before Chrome was even released by Google to shake up the web world) I did at least one full site where <em>every</em> single measurement was in em's - not just the font sizes, but the layout measurements, the borders, the image dimensions, <em>everything</em>! This mean that when the font was sized up or down by the browser, the current zooming effect we all have now was delivered. In all browsers. Aside from having to do some lots of divisions to work out image dimensions (and remembering what the equivalent of 1px was for the borders!), this wasn't all <em>that</em> difficult most of the time.. but where it <em>would</em> become awkward was if a containing element had a font-size which would affect the effective size of an em such that the calculations from pixel to em changed. In other words, cascading styles bit me again!</p>

<p><img src="/Content/Images/Posts/MixedUnitMeasurements.png" alt="Mixing measurement units is confusing" title="Mixing measurement units is confusing" />
In more common cases, I've combined pixels and ems - using ems in most places but pixels for particular layout arrangements and images.</p>

<p>But with the current state of things, with the browsers handling zooming of the content regardless of the units specified, I'm seriously suggesting using pixels <em>exclusively</em>. For one thing, it will make width calculations, where required, much <em>much</em> simpler; there can't be any confusion when trying to reason about distances in mixed units!</p>

<p>I'm going to try to pixels-only and see how it goes!</p>

<p>One pattern that I've seen used is to combine "float: left;" and "width: 100%;" when an element has children that are floated, but the element must expand to fully contain all of those children. In the majority of cases I see it used in site builds where I work, the elements that have been floated could have had "display: inline-block" applied instead to achieve the same layout - the use of floats is left over from having to fully support IE6 which wouldn't respect "inline-block" (it was less than a year ago that we managed to finally shackle those IE6 chains! Now it's a graceful-degradation-only option, as I think it should be).</p>

<p>So there's a chance that some allowances will have to be made for 100% widths, but I'm going to start off optimistic and hope that it's not the case until I'm proven wrong (either by myself or someone else trying these rules!).</p>

<p><strong>Update (22nd January 2013)</strong>: Although I'm currently still aiming for all-pixel measurements for elements, after reading this article <a href="http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/">The EMs have it: Proportional Media Queries FTW!</a> I think I might get sold on the idea of using em's in media queries.. it seems like it would be an ideal to work with browsers that have been zoomed in sufficiently that they'd look better moving the next layout break point. I need to do some testing with mobile or tablet devices, but it sounds intriguing!</p>

<h4>Margins, where specified, must always be fully-defined</h4>

<p>This is straight from the lispcast post; it just means that if you specify a margin property that you should use the <em>"margin"</em> property and not "margin-left", "margin-top", etc.. The logic being that if you specify only "margin-left", for example, then the other margin sizes are inherited from the previous declaration that was applied (even if that's only the reset files). The point is that the style is split over multiple declarations and this is what we're trying to avoid.</p>

<p>So instead of</p>

<pre><code>margin-left: 4px;
</code></pre>

<p>specify</p>

<pre><code>margin: 0 0 0 4px;
</code></pre>

<p>If you require a 4px margin top, bottom, left and right then</p>

<pre><code>margin: 4px;
</code></pre>

<p>is fine, the point is to ensure that every dimension is specified at once (which the above will do), specifying the dimensions individually within a single margin value is only required if different sides need different margin sizes!</p>

<h4>Border and Padding may not be combined with Width</h4>

<p>This is also heavily inspired by the lispcast post, it's intended to avoid box model confusion. When I first read it, I had a blast-from-the-past shiver go through me from the dark days where we had to deal with different box models between IE and other browsers but this hasn't been an issue with the proper doc types since IE...6?? So what really concerns us is if we have</p>

<pre><code>&lt;div class="outer"&gt;
  &lt;div class="inner"&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>and we have the styles</p>

<pre><code>.outer { width: 300px; margin: 0; border: 1px solid black; padding: 0; }
.inner { width: 300px; margin: 0; border: 1px solid black; padding: 10px; }
</code></pre>

<p>then we could be forgiven for wanting both elements to be rendered with the same width, but we'll find the "inner" element to appear wider than the "outer" since the width within the border is the content width (as specified by the css style) and <em>then</em> the padding width on top of that.</p>

<p>Another way to illustrate would be the with the styles</p>

<pre><code>.outer { width: 300px; margin: 0; border: 1px solid black; padding: 0; }
.inner { width: 100%;  margin: 0; border: 1px solid black; padding: 10px; }
</code></pre>

<p>Again, the "inner" element juts out of the "outer" since the padding is applied around the 100% width (in this example, the 100% equates to the 300px total width of the "outer" element) which seems counter-intuitive.</p>

<p><img src="/Content/Images/Posts/BoxModel.png" alt="Box Model Example" title="Box Model Example" /></p>

<p>So what if we don't use padding at all?</p>

<p>In an ideal world - in terms of the application of styling rules - where an element requires both an explicit width <em>and</em> a padding, this could be achieved with <em>two</em> elements; where the outer element has the width assigned and the inner element has the padding. But, depending upon how we're building content, we mightn't have the ability to insert extra elements. There's also a fair argument that we'd adding elements solely for presentation rather than semantic purpose. So, say we have something like</p>

<pre><code>&lt;div class="AboutMe"&gt;
  &lt;h3&gt;About&lt;/h3&gt;
  &lt;p&gt;Content&lt;/p&gt;
&lt;/div&gt;
</code></pre>

<p>instead of specifying</p>

<pre><code>div.AboutMe { width: 200px; padding: 8px; }
</code></pre>

<p>maybe we could consider</p>

<pre><code>div.AboutMe { width: 200px; }
div.AboutMe &gt; h3 { margin: 8px 8px 0 8px; }
div.AboutMe &gt; p { margin: 0 8px 8px 8px; }
</code></pre>

<p>This would achieve a similar effect but there is a certain complexity overhead. I've used child selectors to indicate the approach that might be used if there were more complicated content; if one of the child elements was a div then we would want to be certain that this pseudo-padding margin <em>only</em> applied to the child div and not one of <em>its</em> descendent divs (this ties in with rule 3's "a bare selector may occur within a nested selector so long as child selectors are strictly used" proviso).</p>

<p>And the border issue hasn't been addressed; setting a border can extend the total rendered width beyond the width specified by css as well! (Also indicated in the example image above).</p>

<p>So I'm tentatively suggesting just not having any styles apply to any element that specifies width <em>and</em> padding and/or border.</p>

<p>This is one of the rules that I feel least confident about and will be considering retracting when I manage to get these into use in a few projects. If the benefit isn't sufficient to outweigh the cost of thinking around it, then it may have to be put out to pasture.</p>

<h3>Linting</h3>

<p>As I've said, I'm yet to fully use all of these rules in anger on a real, sizable project. But it's something I intend to do very soon, largely to see how well they do or don't all work together.</p>

<p>Something I'm contemplating looking into is adding a pre-processing "lint" step that will try to confirm that all of these rules have been followed. Inspired by <a href="http://www.jslint.com">Douglas Crockford's JsLint</a> (and I've only just found out that "lint" is a generic term, I didn't know until now where it came from! See <a href="http://en.wikipedia.org/wiki/Lint_(software)">"Lint" on Wikipedia</a>).</p>

<p>It could be configured such that if a rule was identified to have not been followed, then an error would be returned in place of any style content - that would ensure that I didn't ignore it!</p>

<p>I'm not sure yet how easy it will or won't be to check for all of these rules, but I'm definitely interested in finding out!</p>

<p>Hopefully I'll post back with a follow-up at some point, possibly with any interesting pre-processing code to go along with it. I think the only way to determine the validity of these rules is with the eating of a whole lot of my own dog food :)</p>

<p><strong>Update (4th June 2013):</strong> I've written a couple of related posts - see the <a href="/noncascading-css-the-followup">Non-cascading CSS: The follow-up</a> and <a href="/extending-the-css-minifier">Extending the CSS Minifier</a>. The first has a couple of amendments I've made to these rules after putting them into practice and the second has information about how my <a href="https://bitbucket.org/DanRoberts/cssminifier">CSS Minifier</a> project now has support for injecting into the compiled output the "source ids" mentioned in this post, along with a way to implement rule 5 (html-tag-scoping). I also intend to write a few posts about the mechanisms used to implement these processing steps starting with <a href="/parsing-css">Parsing CSS</a>.</p><p class="PostTime">Posted at 23:04</p><div class="Tags"><label>Tags:</label><ul><li><a href="/Archive/Tag/CSS" title="9 Posts">CSS</a></li><li><a href="/Archive/Tag/Optimisation" title="8 Posts">Optimisation</a></li></ul></div>
			<p class="Comments">
				<a href="/noncascading-css-a-revolution#disqus_thread" data-disqus-identifier="42">Comments</a>
			</p>
	</div>

	<script type="text/javascript">
					(function () {
						var s = document.createElement("script");
						s.type = "text/javascript";
						s.async = true;
						s.src = "https://" + disqus_shortname + ".disqus.com/count.js";
						(document.getElementsByTagName("HEAD")[0] || document.getElementsByTagName("BODY")[0]).appendChild(s);
					} ());
	</script>

				<div class="Footer">
					Productive Rage 2017
				</div>
			</div>

			<div class="SideBar">
				<div class="About">
					<h2>About</h2>
					<p>Dan is a big geek who likes making stuff with computers! He can be quite outspoken so clearly needs a blog :)</p>
					<p>In the last few minutes he seems to have taken to referring to himself in the third person. He's quite enjoying it.</p>
					<p><a href="mailto:dangger36@gmail.com" class="Email">dangger36@gmail.com</a></p>

				</div>
				<div class="Search">
<form action="/Search" method="get" />						<div>
							<input type="text" class="SiteSearch" name="term" value="" />
							<input type="submit" class="SiteSearchSubmit" value="Search" />
						</div>
</form>				</div>
				<div class="Recent"><h2>Recent Posts</h2><ul><li><a href="/revisiting-net-core-tooling-visual-studio-2017">Revisiting .NET Core tooling (Visual Studio 2017)</a></li><li><a href="/face-or-no-face-finding-faces-in-photos-using-c-sharp-and-accordnet">Face or no face (finding faces in photos using C# and Accord.NET)</a></li><li><a href="/migrating-my-full-text-indexer-to-net-core-supporting-multitarget-nuget-packages">Migrating my Full Text Indexer to .NET Core (supporting multi-target NuGet packages)</a></li><li><a href="/when-a-disk-cache-performs-better-than-an-inmemory-cache-befriending-the-net-gc">When a disk cache performs better than an in-memory cache (befriending the .NET GC)</a></li><li><a href="/performance-tuning-a-bridgenet-react-app">Performance tuning a Bridge.NET / React app</a></li></ul><div class="RSSFeedLink"><a href="http://www.productiverage.com/feed">RSS Feed</a></div></div>
				<div class="Featured"><h2>Highlights</h2><ul><li><a href="/when-a-disk-cache-performs-better-than-an-inmemory-cache-befriending-the-net-gc">When a disk cache performs better than an in-memory cache (befriending the .NET GC)</a></li><li><a href="/performance-tuning-a-bridgenet-react-app">Performance tuning a Bridge.NET / React app</a></li><li><a href="/creating-a-c-sharp-roslyn-analyser-for-beginners-by-a-beginner">Creating a C# (&quot;Roslyn&quot;) Analyser - For beginners by a beginner</a></li><li><a href="/translating-vbscript-into-c-sharp">Translating VBScript into C#</a></li><li><a href="/entity-framework-projections-to-immutable-types-ienumerable-vs-iqueryable">Entity Framework projections to Immutable Types (IEnumerable vs IQueryable)</a></li></ul></div>
				<div class="History"><h2>Archives</h2><ul><li><a href="/Archive/6/2017">June 2017 (1)</a></li><li><a href="/Archive/2/2017">February 2017 (1)</a></li><li><a href="/Archive/11/2016">November 2016 (1)</a></li><li><a href="/Archive/9/2016">September 2016 (2)</a></li><li><a href="/Archive/8/2016">August 2016 (1)</a></li><li><a href="/Archive/7/2016">July 2016 (1)</a></li><li><a href="/Archive/6/2016">June 2016 (1)</a></li><li><a href="/Archive/5/2016">May 2016 (3)</a></li><li><a href="/Archive/3/2016">March 2016 (3)</a></li><li><a href="/Archive/2/2016">February 2016 (2)</a></li><li><a href="/Archive/12/2015">December 2015 (1)</a></li><li><a href="/Archive/11/2015">November 2015 (2)</a></li><li><a href="/Archive/8/2015">August 2015 (3)</a></li><li><a href="/Archive/7/2015">July 2015 (1)</a></li><li><a href="/Archive/6/2015">June 2015 (1)</a></li><li><a href="/Archive/5/2015">May 2015 (2)</a></li><li><a href="/Archive/4/2015">April 2015 (1)</a></li><li><a href="/Archive/3/2015">March 2015 (1)</a></li><li><a href="/Archive/1/2015">January 2015 (2)</a></li><li><a href="/Archive/12/2014">December 2014 (1)</a></li><li><a href="/Archive/11/2014">November 2014 (1)</a></li><li><a href="/Archive/10/2014">October 2014 (2)</a></li><li><a href="/Archive/9/2014">September 2014 (2)</a></li><li><a href="/Archive/8/2014">August 2014 (1)</a></li><li><a href="/Archive/7/2014">July 2014 (1)</a></li><li><a href="/Archive/6/2014">June 2014 (1)</a></li><li><a href="/Archive/5/2014">May 2014 (2)</a></li><li><a href="/Archive/2/2014">February 2014 (1)</a></li><li><a href="/Archive/1/2014">January 2014 (1)</a></li><li><a href="/Archive/12/2013">December 2013 (1)</a></li><li><a href="/Archive/11/2013">November 2013 (1)</a></li><li><a href="/Archive/10/2013">October 2013 (1)</a></li><li><a href="/Archive/8/2013">August 2013 (3)</a></li><li><a href="/Archive/7/2013">July 2013 (3)</a></li><li><a href="/Archive/6/2013">June 2013 (1)</a></li><li><a href="/Archive/5/2013">May 2013 (2)</a></li><li><a href="/Archive/4/2013">April 2013 (1)</a></li><li><a href="/Archive/3/2013">March 2013 (8)</a></li><li><a href="/Archive/2/2013">February 2013 (2)</a></li><li><a href="/Archive/1/2013">January 2013 (2)</a></li><li><a href="/Archive/12/2012">December 2012 (3)</a></li><li><a href="/Archive/11/2012">November 2012 (4)</a></li><li><a href="/Archive/9/2012">September 2012 (1)</a></li><li><a href="/Archive/8/2012">August 2012 (1)</a></li><li><a href="/Archive/7/2012">July 2012 (3)</a></li><li><a href="/Archive/6/2012">June 2012 (3)</a></li><li><a href="/Archive/5/2012">May 2012 (2)</a></li><li><a href="/Archive/2/2012">February 2012 (3)</a></li><li><a href="/Archive/1/2012">January 2012 (4)</a></li><li><a href="/Archive/12/2011">December 2011 (7)</a></li><li><a href="/Archive/8/2011">August 2011 (2)</a></li><li><a href="/Archive/7/2011">July 2011 (1)</a></li><li><a href="/Archive/5/2011">May 2011 (1)</a></li><li><a href="/Archive/4/2011">April 2011 (2)</a></li><li><a href="/Archive/3/2011">March 2011 (3)</a></li></ul><div class="EveryTitle"><a href="/Archive/All">Every Post Title</a></div></div>
			</div>

		</div>
	</div>

	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
	<script type="text/javascript" src="/Scripts/jquery.autocomplete.min.js"></script>
	<script type="text/javascript" src="/Scripts/prettify.js"></script>
	<script type="text/javascript" src="/Scripts/Site.js"></script>
	<script type="text/javascript" src="/Scripts/IndexSearchGenerator.js"></script>
	<script type="text/javascript" src="/Scripts/SearchTermHighlighter.js"></script>
	<script type="text/javascript" src="/Scripts/SearchPage.js"></script>
	<script type="text/javascript" src="/Scripts/LZString.js"></script>

</body>
</html>
